<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:;">
    <title>CRM Analytics - Clouds on Mars</title>
    <meta name="description" content="Professional CRM Analytics Dashboard for Clouds on Mars">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary: #FF4D00;
            --secondary: #FF6B35;
            --accent: #FFB800;
            --success: #00D084;
            --warning: #FF9500;
            --danger: #FF3B30;
            --info: #007AFF;
            
            --bg-primary: #0A0A0B;
            --bg-secondary: #111113;
            --bg-tertiary: #1A1A1D;
            --bg-glass: rgba(255, 255, 255, 0.03);
            --bg-glass-hover: rgba(255, 255, 255, 0.06);
            
            --text-primary: #FFFFFF;
            --text-secondary: #A1A1AA;
            --text-muted: #71717A;
            
            --border-primary: rgba(255, 77, 0, 0.2);
            --border-secondary: rgba(255, 255, 255, 0.1);
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 24px 64px rgba(0, 0, 0, 0.6);
            --shadow-primary: 0 8px 32px rgba(255, 77, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0D0D0F 50%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            position: relative;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 3rem 2rem;
            text-align: center;
            overflow: hidden;
            border-bottom: 1px solid var(--border-primary);
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: white;
            text-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 400;
            position: relative;
            z-index: 2;
        }

        .nav-container {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1.5rem 2rem;
            background: rgba(10, 10, 11, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-secondary);
        }

        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 600px;
            margin: 0 auto;
        }

        .nav-tab {
            background: var(--bg-glass);
            border: 1px solid var(--border-secondary);
            color: var(--text-secondary);
            padding: 0.875rem 1.75rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .nav-tab:hover {
            background: var(--bg-glass-hover);
            border-color: var(--primary);
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .kpi-card {
            background: var(--bg-glass);
            border: 1px solid var(--border-secondary);
            border-radius: 20px;
            padding: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: var(--shadow-primary);
        }

        .kpi-title {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .kpi-value {
            font-size: 3rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            line-height: 1;
        }

        .kpi-trend {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .chart-container {
            background: var(--bg-glass);
            border: 1px solid var(--border-secondary);
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-container:hover {
            border-color: var(--primary);
        }

        .chart-title {
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2rem;
            text-align: center;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 10000;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.5rem; }
            .container { padding: 1rem; }
            .charts-grid { grid-template-columns: 1fr; }
            .kpi-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Debug info -->
    <div class="debug-info" id="debugInfo">Loading...</div>

    <div class="header">
        <h1>üöÄ CRM Analytics</h1>
        <p>Clouds on Mars ‚Ä¢ Strategic Intelligence ‚Ä¢ 81 Opportunities ‚Ä¢ 9.08M PLN Pipeline</p>
    </div>

    <div class="nav-container">
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showPage('overview')">üìä Dashboard</button>
            <button class="nav-tab" onclick="showPage('performance')">üë• Team Performance</button>
            <button class="nav-tab" onclick="showPage('insights')">üéØ Strategic Actions</button>
        </div>
    </div>

    <div class="container">
        <!-- Overview Page -->
        <div id="overview" class="page active">
            <div class="kpi-grid">
                <div class="kpi-card" onclick="alert('Pipeline: 9.08M PLN z 70 opportunities')">
                    <div class="kpi-title">Total Pipeline Value</div>
                    <div class="kpi-value">9.08M</div>
                    <div class="kpi-trend">70 opportunities with value ‚Ä¢ +12% YoY growth</div>
                </div>
                <div class="kpi-card" onclick="alert('Win Rate: 27% - Target: 35%')">
                    <div class="kpi-title">Win Rate Performance</div>
                    <div class="kpi-value">27%</div>
                    <div class="kpi-trend">22 won deals ‚Ä¢ Target: 35% ‚Ä¢ Gap: -8%</div>
                </div>
                <div class="kpi-card" onclick="alert('Sales Velocity: 8.2 miesiƒôcy ≈õrednio')">
                    <div class="kpi-title">Sales Velocity</div>
                    <div class="kpi-value">8.2mo</div>
                    <div class="kpi-trend">Avg cycle ‚Ä¢ Industry: 6.5mo ‚Ä¢ 15 stale deals</div>
                </div>
                <div class="kpi-card" onclick="alert('Lead Conversion: 28% vs benchmark 45%')">
                    <div class="kpi-title">Lead Conversion</div>
                    <div class="kpi-value">28%</div>
                    <div class="kpi-trend">Lead‚ÜíQualified ‚Ä¢ Benchmark: 45% ‚Ä¢ Critical gap</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Pipeline Flow Analysis</h3>
                    <canvas id="stageChart" width="400" height="200"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Lead Source Performance</h3>
                    <canvas id="sourceChart" width="400" height="200"></canvas>
                </div>
            </div>

            <div style="background: var(--bg-glass); border: 1px solid var(--border-secondary); border-radius: 20px; padding: 2rem;">
                <h3 style="color: var(--accent); font-size: 1.5rem; margin-bottom: 2rem; text-align: center;">üéØ High-Value Opportunities</h3>
                <div style="display: grid; gap: 1rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-tertiary); border-radius: 10px;">
                        <div>
                            <strong>Qatar Foundation</strong><br>
                            <span style="color: var(--accent);">1,322,064 PLN</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="background: var(--info); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem;">Opportunity</span><br>
                            <small style="color: var(--text-secondary);">Adam R. ‚Ä¢ Medium Risk</small>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-tertiary); border-radius: 10px;">
                        <div>
                            <strong>Bank ABC</strong><br>
                            <span style="color: var(--accent);">390,000 PLN</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="background: var(--success); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem;">Contracting</span><br>
                            <small style="color: var(--text-secondary);">Adam R. ‚Ä¢ Low Risk</small>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-tertiary); border-radius: 10px;">
                        <div>
                            <strong>Reckitt Benckiser</strong><br>
                            <span style="color: var(--accent);">300,000 PLN</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="background: var(--warning); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem;">Qualified Lead</span><br>
                            <small style="color: var(--text-secondary);">Adam R. ‚Ä¢ High Risk</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Page -->
        <div id="performance" class="page">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
                <div style="background: var(--bg-glass); border: 1px solid var(--border-secondary); border-radius: 20px; padding: 2rem;">
                    <h3 style="color: var(--text-primary); font-size: 1.25rem; margin-bottom: 1.5rem;">Adam Rusyniak</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">28</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Active Deals</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">25%</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Win Rate</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">165K</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Avg Deal Size</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">2.1M</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Pipeline Value</div>
                        </div>
                    </div>
                </div>

                <div style="background: var(--bg-glass); border: 1px solid var(--border-secondary); border-radius: 20px; padding: 2rem;">
                    <h3 style="color: var(--text-primary); font-size: 1.25rem; margin-bottom: 1.5rem;">Jakub Tamas</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">29</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Active Deals</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">28%</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Win Rate</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">180K</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Avg Deal Size</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">2.3M</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Pipeline Value</div>
                        </div>
                    </div>
                </div>

                <div style="background: var(--bg-glass); border: 2px solid var(--success); border-radius: 20px; padding: 2rem; box-shadow: 0 8px 32px rgba(0, 208, 132, 0.2);">
                    <h3 style="color: var(--success); font-size: 1.25rem; margin-bottom: 1.5rem;">‚≠ê Micha≈Ç Motyl (Top Performer)</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">8</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Active Deals</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--success);">37%</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Win Rate</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">190K</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Avg Deal Size</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">680K</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Pipeline Value</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Performance Comparison</h3>
                <canvas id="performanceChart" width="400" height="250"></canvas>
            </div>
        </div>

        <!-- Insights Page -->
        <div id="insights" class="page">
            <div style="text-align: center; margin-bottom: 3rem;">
                <h2 style="color: var(--text-primary); font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem;">‚ö° Strategic Action Plan</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Immediate actions to optimize pipeline and accelerate growth</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
                <div style="background: linear-gradient(145deg, rgba(255, 61, 48, 0.1), rgba(255, 107, 53, 0.1)); border: 2px solid var(--danger); border-radius: 20px; padding: 2rem;">
                    <h4 style="color: var(--danger); font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">üö® CRITICAL: Fix Lead Conversion Crisis</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">28% conversion rate vs 45% benchmark. Losing 5-7 qualified leads monthly = ~850K PLN lost opportunity.</p>
                    <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: 12px;">
                        <strong style="color: var(--accent);">Immediate Actions:</strong><br>
                        ‚Ä¢ Implement BANT qualification framework by Friday<br>
                        ‚Ä¢ Set up automated follow-up sequences<br>
                        ‚Ä¢ Weekly pipeline review meetings starting Monday<br>
                        ‚Ä¢ Lead scoring system deployment<br><br>
                        <strong style="color: var(--success);">Expected Impact:</strong> +40% qualified leads in 60 days
                    </div>
                </div>

                <div style="background: linear-gradient(145deg, rgba(255, 149, 0, 0.1), rgba(255, 107, 53, 0.1)); border: 2px solid var(--warning); border-radius: 20px; padding: 2rem;">
                    <h4 style="color: var(--warning); font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">‚ö° HIGH PRIORITY: Scale Best Practices</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">37% win rate vs team average 25%. Scaling Micha≈Ç's approach could add +300K monthly.</p>
                    <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: 12px;">
                        <strong style="color: var(--accent);">Knowledge Transfer:</strong><br>
                        ‚Ä¢ Weekly shadowing sessions (2 calls per team member)<br>
                        ‚Ä¢ Document qualification methodology<br>
                        ‚Ä¢ Create discovery call templates<br>
                        ‚Ä¢ Peer coaching program launch<br><br>
                        <strong style="color: var(--success);">Goal:</strong> Team avg win rate 32% by end of Q4
                    </div>
                </div>

                <div style="background: linear-gradient(145deg, rgba(0, 122, 255, 0.1), rgba(6, 182, 212, 0.1)); border: 2px solid var(--info); border-radius: 20px; padding: 2rem;">
                    <h4 style="color: var(--info); font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">üéØ FOCUS: Qatar Foundation Priority</h4>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">1.32M PLN deal at 50% probability. Needs dedicated attention and risk mitigation.</p>
                    <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: 12px;">
                        <strong style="color: var(--accent);">Executive Attention:</strong><br>
                        ‚Ä¢ Weekly executive check-ins<br>
                        ‚Ä¢ Dedicated success manager assignment<br>
                        ‚Ä¢ Risk assessment and mitigation plan<br>
                        ‚Ä¢ Stakeholder mapping and relationship plan<br><br>
                        <strong style="color: var(--success);">Timeline:</strong> Close by end of Q4
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 20px; padding: 2rem; color: white;">
                    <h4 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">üìà Impact Projection - Q4 2024</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-top: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;">+2.8M PLN</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">Additional pipeline value</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;">35%</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">Target win rate</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;">6.5mo</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">Target sales cycle</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 900; margin-bottom: 0.5rem;">ROI 280%</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">Expected ROI</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Debug information
        function updateDebugInfo(message) {
            const debugEl = document.getElementById('debugInfo');
            if (debugEl) {
                debugEl.innerHTML = message;
            }
        }

        // Navigation function
        function showPage(pageId) {
            updateDebugInfo('Switching to: ' + pageId);
            
            try {
                // Hide all pages
                const pages = document.querySelectorAll('.page');
                pages.forEach(page => page.classList.remove('active'));
                
                // Remove active from all tabs
                const tabs = document.querySelectorAll('.nav-tab');
                tabs.forEach(tab => tab.classList.remove('active'));
                
                // Show selected page
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                } else {
                    updateDebugInfo('ERROR: Page not found: ' + pageId);
                    return;
                }
                
                // Mark active tab
                if (event && event.target) {
                    event.target.classList.add('active');
                }
                
                updateDebugInfo('SUCCESS: Page switched to ' + pageId);
            } catch (error) {
                updateDebugInfo('ERROR in showPage: ' + error.message);
            }
        }

        // Chart initialization
        function initializeCharts() {
            updateDebugInfo('Initializing charts...');
            
            try {
                // Check if Chart.js is loaded
                if (typeof Chart === 'undefined') {
                    updateDebugInfo('ERROR: Chart.js not loaded');
                    return;
                }

                // Stage Chart
                const stageCtx = document.getElementById('stageChart');
                if (stageCtx) {
                    new Chart(stageCtx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['Lead', 'Qualified', 'Opportunity', 'Proposal', 'Contracting', 'Won', 'Lost'],
                            datasets: [{
                                data: [25, 7, 6, 2, 5, 22, 10],
                                backgroundColor: [
                                    '#FF4D00', '#FF6B35', '#FFB800', '#007AFF', 
                                    '#00D084', '#10B981', '#FF3B30'
                                ],
                                borderWidth: 0,
                                borderRadius: 8
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: { 
                                legend: { display: false }
                            },
                            scales: {
                                y: { 
                                    beginAtZero: true,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#A1A1AA' }
                                },
                                x: { 
                                    grid: { display: false },
                                    ticks: { color: '#A1A1AA' }
                                }
                            }
                        }
                    });
                } else {
                    updateDebugInfo('ERROR: stageChart canvas not found');
                }

                // Source Chart
                const sourceCtx = document.getElementById('sourceChart');
                if (sourceCtx) {
                    new Chart(sourceCtx.getContext('2d'), {
                        type: 'doughnut',
                        data: {
                            labels: ['Up-sell (53)', 'Personal Network (6)', 'Referrals (6)', 'Events (6)', 'Other (6)'],
                            datasets: [{
                                data: [53, 6, 6, 6, 6],
                                backgroundColor: ['#FF4D00', '#FF6B35', '#FFB800', '#007AFF', '#00D084'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            cutout: '60%',
                            plugins: {
                                legend: { 
                                    position: 'bottom',
                                    labels: { color: '#A1A1AA' }
                                }
                            }
                        }
                    });
                } else {
                    updateDebugInfo('ERROR: sourceChart canvas not found');
                }

                // Performance Chart
                const perfCtx = document.getElementById('performanceChart');
                if (perfCtx) {
                    new Chart(perfCtx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['Adam R.', 'Jakub T.', 'Micha≈Ç M.', 'Others'],
                            datasets: [
                                {
                                    label: 'Win Rate (%)',
                                    data: [25, 28, 37, 18],
                                    backgroundColor: '#FF4D00',
                                    borderRadius: 6,
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'Opportunities',
                                    data: [28, 29, 8, 16],
                                    backgroundColor: '#FFB800',
                                    borderRadius: 6,
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: { labels: { color: '#A1A1AA' } }
                            },
                            scales: {
                                x: {
                                    grid: { display: false },
                                    ticks: { color: '#A1A1AA' }
                                },
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: { display: true, text: 'Win Rate (%)', color: '#FF4D00' },
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#A1A1AA' }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    title: { display: true, text: 'Opportunities', color: '#FFB800' },
                                    grid: { drawOnChartArea: false },
                                    ticks: { color: '#A1A1AA' }
                                }
                            }
                        }
                    });
                } else {
                    updateDebugInfo('ERROR: performanceChart canvas not found');
                }

                updateDebugInfo('SUCCESS: All charts initialized');

                // Hide debug info after 3 seconds if successful
                setTimeout(() => {
                    const debugEl = document.getElementById('debugInfo');
                    if (debugEl && debugEl.innerHTML.includes('SUCCESS')) {
                        debugEl.style.display = 'none';
                    }
                }, 3000);

            } catch (error) {
                updateDebugInfo('ERROR in chart initialization: ' + error.message);
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            updateDebugInfo('DOM loaded, initializing...');
            
            // Small delay to ensure Chart.js is fully loaded
            setTimeout(initializeCharts, 100);
        });

        // Fallback initialization
        window.addEventListener('load', function() {
            if (document.getElementById('debugInfo').innerHTML.includes('ERROR')) {
                updateDebugInfo('Fallback initialization...');
                setTimeout(initializeCharts, 500);
            }
        });
    </script>
</body>
</html>